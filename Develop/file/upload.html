<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>基础知识</title>
	<link href="../../static/css/bootstrap.min.css" rel="stylesheet">
	<link href="../../static/css/animate.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../../static/css/public.css" />
	<style type="text/css">
		li{
			text-indent: 2em;
		}
	</style>
</head>
<body>
	<!--右边内容-->
	<div id="app" class="main animated fadeInRight">
		<div class="shadow">
			<div>
				<div>
					<div class="Table"  v-cloak>
						<div class="TableRow" v-for="(el,index) in list">
							<a class="RowRight" :href="'#'+el.id">{{el.name}}</a>
						</div>
					</div>	
				</div>
				<div>
					<div>
						<h4  id="show">上传前显示图片</h4>
						<pre>
	file=upload.files;
	upload.onchange=function(e){
		var imgUrl=URL.createObjectURL(e.target.files[0])
		img.src =imgUrl //获取文件图片地址
		URL.revokeObjectURL
	}
	
	方法二
	btn.addEventListener('change',function(){
		let file = this.files[0];
		// 进一步防止文件类型错误
		if(!/image\/\w+/.test(file.type)){  
	        alert("看清楚，这个需要图片！");  
	        return false;  
	    }  
		img.src = URL.createObjectURL(file)
		console.log(img.src)
	})
						</pre>
					</div>
					<div>
						<h4  id="Blob">Blob上传</h4>
						<pre>
	btn.onclick = function () {//btn 保存按钮
		var file = document.querySelector('[type=file]');// 文件元素
		var formData = new FormData();
		// 将文件转二进制
		formData.append('upload', file.files[0]);
		// JavaScript file-like 对象
		var content = '<a id="a"><b id="b">hey!</b></a>'; // 新文件的正文...
		var blob = new Blob([content], { type: "text/xml"});
		formData.append("webmasterfile", blob);// 通过FormData将文件转成二进制数据
	
		var xhr = new XMLHttpRequest;
		xhr.open('post', './file.php');
		xhr.upload.onprogress = function (ev) {// 监听上传进度
			var percent = (ev.loaded / ev.total) * 100 + '%';
			progress.style.width = percent;
		}
		xhr.send(formData);
		xhr.onreadystatechange = function () {
			if(xhr.readyState == 4 && xhr.status == 200) {
				//code
			}
		}
	}	
						</pre>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--页面加载进度条-->
	<script src="../../static/js/plugins/pace/pace.min.js"></script>
	<script src="../../static/js/vue.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var app = new Vue({
			el: "#app",
			data: function () {
				return {
					list:[
						{name:"上传前显示图片",id:"show"},
						{name:"利用Blob上传",id:"Blob"},
					]
				}
			},
		})
	</script>
</body>

</html>